import { PolymerElement, html } from '/node_modules/@polymer/polymer/polymer-element.js';
import '/node_modules/@vaadin/vaadin-dialog/vaadin-dialog.js';
import { Dazzle } from '/node_modules/@dazzle/dz-dazzle/dz-library.js';

class dzElm extends PolymerElement {
    static get properties() {
        return {

        };
    }

    constructor() {
        super();
        Dazzle.uid = "change";
        Dazzle.tid = "change";
        Dazzle.userBucket = "change.dazzle.website";
        
        let basePath = "template/change/_block/";
        console.log(basePath);
        let user = store.get('user') || null;
        if (user)
            this.fileManager = new AwsPackage(user);
        this.label = '頁尾';
        this.menu = [{
            'text': '編輯',
            'event': 'edit',
            'source': this
        }];

    }

    ready() {
        super.ready();
        let basePath = "template/change/_block/";
        Dazzle.uid = 'change';
        Dazzle.getUserDataContent(basePath + 'footer').then(html => {
            console.log('Footer', html);
            this.innerHTML = `
                  <div id="footer" class="footer">
                ` +
                html +
                `  
                  </div>
              `;
            this.querySelector('.footer').style.backgroundColor = "#F0846C";

            let isFree = store.get('isFree') || false;
            this.isFreeUpdate(isFree);


            // if (Dazzle.editMode === "admin") {
            //     let footer = this.querySelector('#footer');
            //     console.log('Footer', footer);
            //     footer.querySelectorAll('*').forEach(item => {
            //         console.log('footer', item);
            //         new defaultPackage(item);
            //     });

            //     document.addEventListener('save', e => {
            //         this.fileManager.saveUserData(basePath + 'footer', footer.innerHTML);

            //     });

            // }



        });

        document.addEventListener('areachange', e => {

            console.log('Area Change');
            this.isFreeUpdate(e.detail.isFree);
        });


    }
    isFreeUpdate(isFree){
        if (isFree) {
            this.querySelector('.footer').style.backgroundColor = "#4CAF50";

        } else {
            this.querySelector('.footer').style.backgroundColor = "#F0846C";

        }

    }
    edit() {
        this.editor();
    }
//     static get template() {
//         // Template getter must return an instance of HTMLTemplateElement.
//         // The html helper function makes this easy.
//         return html `
//     <style include="main-style></style>
//     <style>
//     li {
//         display: block;
//     }

//     .footer {
//         background-color: #F0846C;
//         color: white;
//         height: auto;
//         line-height: 1.5;
//     }

//     .fpanel1 {
//         width: 100%;
//         margin: 0 auto;
//         width: 100%;
//         margin: 0 auto;
//         display: grid;
//         grid-row-gap: 20px;
//         grid-column-gap: 15px;
//         grid-template-columns: 28% 28% 28%;
//         grid-template-rows: 50% 50%;
//     }

//     a.test {
//         color: white;
//         text-decoration: none;
//         font-size: 12px;
//         line-height: 30px;
//     }

//     #social {
//         display: flex;
//         justify-content: space-between;
//         margin: 0 auto;
//         text-align: center;
//         align-items: center;
//         display: inline-flex;
//         float: right;
//         grid-column: 1 / 5;
//         grid-row: 2 / 3;
//     }

//     .footer {
//         height: 300px;
//     }

//     @media (max-width: 768px) {
//         .footer {
//             display: none;
//         }

//         .fpanel1 {
//             width: 100%;
//             margin: 0 auto;
//             padding-bottom: 10px;
//             width: 100%;
//             margin: 0 auto;
//             display: grid;
//             grid-row-gap: 10px;
//             grid-column-gap: 15px;
//             grid-template-columns: repeat(3, 32%);
//             text-align: start;
//         }

//         #social {
//             display: flex;
//             justify-content: space-between;
//             margin: 0 auto;
//             text-align: center;
//             align-items: center;
//             display: inline-flex;
//             float: right;
//             grid-column: 2 / 4;
//             grid-row: 2 / 3;
//         }

//         .footer {
//             height: 500px;
//         }
//     }
// </style>
// <slot></slot>

//     `;
//     }
}

// Register the element with the browser.
customElements.define('change-footer', dzElm);