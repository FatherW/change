//抄东西用的
import { PolymerElement, html } from 'https://d25k6mzsu7mq5l.cloudfront.net/node_modules/@polymer/polymer/polymer-element.js';
import 'https://d25k6mzsu7mq5l.cloudfront.net/node_modules/@vaadin/vaadin-dialog/vaadin-dialog.js';
import { Dazzle } from 'https://d25k6mzsu7mq5l.cloudfront.net/node_modules/@dazzle/dz-dazzle/dz-library.js';
//import "https://d25k6mzsu7mq5l.cloudfront.net/bower_components/polymer/Dazzle.html";

// import "https://d25k6mzsu7mq5l.cloudfront.net/bower_components/dz-dazzle/dz-block.html";
import "./change-in-item.js";
import "./change-category.js";
import "./change-district.js";
import "./change-product-status.js";

import "./change-range.js";
class changeslidelist extends PolymerElement {
    static get properties() {
        return {
            'countcate': {
                "type": Number
            },
            'cateIdarray': {
                "type": Array
            },
            'allIdarray': {
                "type": Array
            },
            'storeingcate': {
                "type": Array
            }
        };
    }

    constructor() {
        super();
    }
    ready() {
        super.ready();
        let that = this;
        let shadow = this.shadowRoot;
        let Url = "https://41khtanrje.execute-api.ap-northeast-1.amazonaws.com/prod/Dazzle-elasticSearchController";

        var storetags = location.search;
        let turntags = [];
        for (let b = 0; b < storetags.length; b++) {
            turntags.push(storetags[b])
        }
        if (turntags[1] == "c") {
            turntags.splice(0, 5);
            var thecate = turntags.join("").toString();

        } else if (turntags[1] == "t") {

            turntags.splice(0, 4);
            var thetags = turntags.join("").toString();
            var dec = unescape(thetags);




        } else {};



        document.addEventListener('areachange', e => {
            console.log('Area Change Slide');
            let free = e.detail.isFree;
            let shadow = this.shadowRoot;
            let freecss = shadow.querySelectorAll('.titlecolor');
            if (free == true) {
                shadow.querySelector('#pricerange').style.display = "none";
                freecss.forEach(item=>{
                    item.style.backgroundColor = "#4CAF50";
                });
            } else {
                let freecss = shadow.querySelectorAll('.titlecolor');
                freecss.forEach(item=>{
                    item.style.backgroundColor = "#F0846C";
                });
                shadow.querySelector('#pricerange').style.display = "block";
            }
        })

//        document.querySelector('#slidelistall').style.display = "none";



    }
    _toggle() {
        let check = this.shadowRoot.querySelector('#allStatus').checked;
        if (check)
            this.shadowRoot.querySelector('change-product-status').disable();
        else
            this.shadowRoot.querySelector('change-product-status').enable();



    }
    _searchKeywords(e) {
        // let myTags = this.shadowRoot.querySelector('#myTags');
        // let val = this.shadowRoot.querySelector('#inputTags').value;
        console.log('Keyword', this.keyword);
        if (e.code === "Enter") {
            //myTags._addTag(val);
            Dazzle.dzFire('query-keyword', {
                'detail': {
                    'keyword': this.keyword
                }
            });
            this.shadowRoot.querySelector('#inputTags').value = "";
        }
    }
    _addTags(e) {
        let myTags = this.shadowRoot.querySelector('#myTags');
        let val = this.shadowRoot.querySelector('#inputTags').value;

        if (e.code === "Enter") {
            //myTags._addTag(val);
            Dazzle.dzFire('query-tags', {
                'detail': {
                    'tags': val
                }
            });
            this.shadowRoot.querySelector('#inputTags').value = "";
        }
    }
    static get template() {
        // Template getter must return an instance of HTMLTemplateElement.
        // The html helper function makes this easy.
        return html `
        <style>
        *{
            font-family: sans-serif,微軟正黑體;
        }
     

        change-in-item{
            -webkit-box-shadow: 1px 0px 8px 0px rgba(50, 49, 56, 0.2);
            -moz-box-shadow: 1px 0px 8px 0px rgba(50, 49, 56, 0.2);
            box-shadow: 1px 0px 8px 0px rgba(50, 49, 56, 0.2);
        }
        .catbutton{
            background-color: lightgrey;
            text-align: center;
            padding-left: 13px;
            padding-right: 13px;
            border: none;
            width: auto;
            height: 30px;
            border-radius: 15px;

        }
        a:link,
        a:visited {
            text-decoration: none;
            color: black;
        }

        a:hover {
            text-decoration: none;

        }
        #miniimg{
            width:30px;
            height:30px;
            margin: 5px 0px;
            margin-right: 10px;
        }

        /* .address td{
            position:relative;
        }
        .address #miniimg{
            position:absolute;
            top:10px;
        } */
        .address{
            display: grid;
            width: 97%;
            height:100%;
            grid-row-gap: 0px;
            padding:5px;
            grid-column-gap: 0px;
            grid-row-gap: 0px;
            grid-template-columns: 2fr 8fr;
            background-color: white;
        }
        .shouldblock2{
            display: inline;
        }
        .leftele{
            float: left;
            color: black;
            margin-left: 8px;
            border:none
        }
        .leftele2{
            float:left;
            border: none;
     
            
        } 
        .rightele{
            float: left;
        }
        .rightele2{
            float:right;
        }
        .shouldblock{
            display: flow-root;
        }

        #leftele{
            float: left;
            width: 18%;
            min-width: 220px;
            margin-top: 50px;
            margin-right:30px;
        }

        #rightele{
            width:70%;

        }


        body{
            background-color: wheat;
        }
         #containall{
            background-color: wheat;
            width: 100%;
        }

        .valuebar1 {
            padding-top: 8px;
            padding-left: 15px;
            text-align: left;
            width: 50%;
            font-size: 9px;
            height:30px
        }
        
        .valuebar2 {
            padding-top: 8px;
            padding-right: 15px;
            text-align: right;
            width: 50%;
            font-size: 9px;
            height:30px
        }
        
        .slidebar1 {
            padding-top: 8px;
            padding-bottom: 15px;
            height:50px;
        }
        
        #cong {
            background-color: white;
            font-size: larger;
        }
        
        .largebar {
            width: 50px;
            height: 70px;
        }
        
        .table1 {
            padding-bottom: 10px;
            width: 100%;
            min-width: 200px;
            box-sizing: 1px 10px;
            background-color: white;
            box-shadow: gray;
            margin-bottom: 30px;
            -webkit-box-shadow: 1px 0px 8px 0px rgba(50, 49, 56, 0.2);
            -moz-box-shadow: 1px 0px 8px 0px rgba(50, 49, 56, 0.2);
            box-shadow: 1px 0px 8px 0px rgba(50, 49, 56, 0.2);

        }
        
        td {
            font-size: 15px;
        }
        
        .titlecolor {
            background-color: #F0846C;
            color: white;
            text-align: center;
            width: 100%;
            min-width: 200px;
            font-size: 12px;
            height:50px;
            line-height:50px;
            border: none;
        }
        
        .tags {
            width: 100px;
            border: none;
            padding: 5px;
            font-size: 9px;
            height:50px;
        }

        #isnew1,
        #isnew2{
            height:40px;
        }

        
        
        .box {
            text-align: right;
            padding-right: 7px;
            height:40px;
        }
        
        #loc {
            height:50px;
            width: 100px;
            border: white;
            text-align: right;
            padding-right: 7px;
            font-size: 13px;
        }
        
        .mybutton {
            box-shadow:inset 0px 0px 10px 1px #cf866c;
            background-color:#d0451b;
            border-radius:16px;
            border:2px solid #942911;
            display:inline-block;
            align-items: center;
            cursor:pointer;
            color:#ffffff;
            font-family:Arial;
            margin-left: 100px;
            font-size:12px;
            padding:7px 30px;
            margin-top: 5px;
            text-decoration:none;
            text-shadow:0px 0px 0px #854629;
        }
        .mybutton:hover {
            background-color:#bc3315;
        }
        .mybutton:active {
            position:relative;
            top:1px;
            border: white;
        }

        .hidetb{
            float:right;
            background-image: url("./img/button_bg.svg");
            width:30px;
            height:30px;
            border: none;
            background-color: transparent;
        }



        .hidetb:active{
           outline: none;
        }

        .showtb{
            display: block;
        }
        
        /* .hiddentb{
            display: none;
        } */
       
        #loc2 {
            padding: 5px;
            text-align: center;
            
        }
        
        .inlist {
            font-size: 9px;
            text-align: center;
            margin:6px
        }
        
        .container {
            width: 90%;
        }
        
        

        #toptitle{
            font-size:25px;
            /* margin-left: 10px; */
            font-weight:900;
            text-align: initial;
        }

        body{
            margin:none;
        }

  
        #pricerange{
            display:block
        }
        @media (max-width: 940px) {
            #toptitle{
            
            text-align: center;
        }
        }

        .search-wrapper{
            min-height: 100px;
            background-color: white;
            height:120px;
        }
        .search-panel{
            background: white;
            padding: 5px 15px;
        }
    </style>

<div id="toptitle">篩選</div>
<div class="panel_wrapper">
    <div class="search-wrapper">            
        <div class="titlecolor">
                產品名稱
        </div>
        <div class="search-panel">
            <vaadin-text-field value="{{keyword}}"  on-keydown="_searchKeywords" placeholder="請輸入產品名稱" tabindex="0">
            </vaadin-text-field>
        </div>


    </div>
    <div class="search-wrapper">            
        <div class="titlecolor">
            分類
        </div>
        <div class="search-panel">
            <change-category></change-category>
        </div>

    </div>
    <div class="search-wrapper">            
        <div class="titlecolor">
            配件標籤
        </div>
        <div class="search-panel">
            <div class="address">
                <img id="miniimg" src="/Website%20Design/listing%20page/img/symbol/listing_page-03.png">

                <vaadin-text-field id="inputTags" on-keydown="_addTags" placeholder="請輸入標籤" style="width: 85%;"></vaadin-text-field>
                <paper-tags-input width="100%" id="myTags" style="display:none;"></paper-tags-input>
            </div>
        </div>

    </div>

    <div class="search-wrapper">            
        <div class="titlecolor">
            地點
        </div>
        <div class="search-panel">
            <div class="address">
                <img id="miniimg" src="/Website%20Design/listing%20page/img/symbol/location.png">
                <change-district style="width:80%;  "></change-district>
            </div>
        </div>

    </div>
    <div class="search-wrapper">            
        <div class="titlecolor">
            商品狀況
        </div>
        <div class="search-panel">
            <change-product-status></change-product-status>
            <input type="checkbox" id="allStatus" checked on-click="_toggle">
            <label for="selectAll">全選</label>
        </div>

    </div>

    <div class="search-wrapper" id ="pricerange" style="height:200px;">            
        <div class="titlecolor">
            價錢範圍
        </div>
        <div class="search-panel">
            <div id="renew"><change-range></change-range></div>
            

        </div>

    </div>
    
    

    <!-- <button class="titlecolor" id="searchbutt">搜尋</button>
 -->
</div>
    `;
    }
}

// Register the element with the browser.
customElements.define('change-slidelist', changeslidelist);