import { PolymerElement, html } from 'https://d25k6mzsu7mq5l.cloudfront.net/node_modules/@polymer/polymer/polymer-element.js';
import 'https://d25k6mzsu7mq5l.cloudfront.net/node_modules/@vaadin/vaadin-text-field/vaadin-text-field.js';
import {Dazzle} from 'https://d25k6mzsu7mq5l.cloudfront.net/node_modules/@dazzle/dz-dazzle/dz-library.js';
import './change-user-panel.js';
class dzElm extends PolymerElement {
  static get properties () {
    return {
    
    };
  }

  constructor() {
    super();
    let isFree = store.get('isFree') || false;
    this.isFree = isFree;
  



  }
  _areachange(){
    this.isFree = ! this.isFree;
          store.set('isFree',this.isFree);
          Dazzle.dzFire('areachange', {
                'detail': {
                    "isFree": this.isFree
                }
            });
        location.href="/getchange.html";
     
  }
  ready() {
      super.ready();
      let that = this;
      let shadow = this.shadowRoot;
      try {
            if (this.isFree) {
                shadow.querySelector('.paid').style.backgroundColor = "#4CAF50";
                shadow.querySelector('#areachange').innerText = "免費區";
                document.querySelector('#banner2').src = "/img/banner.jpeg";
            } else {
                shadow.querySelector('.paid').style.backgroundColor = "#F0846C";
                shadow.querySelector('#areachange').innerText = "收費區";
                document.querySelector('#banner2').src = "/img/WX20200513-112437@2x.png"
            }
              
        }catch(e){}

    
        Dazzle.dzFire('areachange', {
            'detail': {
                "isFree": this.isFree
            }
        });
        
      shadow.querySelector('#searchmain').addEventListener("keypress", function (e) {
          var key = e.which || e.keyCode || 0;
          if (key === 13) {
              that.searchlist();
          }

      });

      var isFree = false;
      //shadow.querySelector('#areachange').addEventListener("click", e => {
         //   if (isFree == false) {
        //       store.set('isFree',true);
        //       Dazzle.dzFire('areachange', {
        //           'detail': {
        //               "isFree": true
        //           }
        //       });
        //       isFree = true;
        //       shadow.querySelector('.paid').style.backgroundColor = "#4CAF50";
        //       shadow.querySelector('#areachange').innerText = "免費區";
        //       document.querySelector('#banner2').src = "/img/banner.jpeg"
        //   } else {
        //       store.set('isFree',false);
        //       Dazzle.dzFire('areachange', {
        //           'detail': {
        //               "isFree": false
        //           }
        //       });
        //       isFree = false;
        //       shadow.querySelector('.paid').style.backgroundColor = "#F0846C";
        //       shadow.querySelector('#areachange').innerText = "收費區";
        //       document.querySelector('#banner2').src = "/img/WX20200513-112437@2x.png"


        //   }

      //})

      document.addEventListener('areachange',function(e){
        let isFree = e.detail.isFree || false;
        try{
            if (isFree) {
                shadow.querySelector('.paid').style.backgroundColor = "#4CAF50";
                shadow.querySelector('#areachange').innerText = "免費區";
                document.querySelector('#banner2').src = "/img/banner.jpeg";
            } else {
                shadow.querySelector('.paid').style.backgroundColor = "#F0846C";
                shadow.querySelector('#areachange').innerText = "收費區";
                document.querySelector('#banner2').src = "/img/WX20200513-112437@2x.png"
            }
        } catch(e){

        }

      });

}

_searchKeywords(e) {
    // let myTags = this.shadowRoot.querySelector('#myTags');
    // let val = this.shadowRoot.querySelector('#inputTags').value;
    console.log('Keyword', this.keyword);
    if (e.code === "Enter") {
        //myTags._addTag(val);
        store.set('query-keyword',this.keyword);
        location.href="/list-product.html";
        // Dazzle.dzFire('query-keyword', {
        //     'detail': {
        //         'keyword': this.keyword
        //     }
        // });
//        this.shadowRoot.querySelector('#inputTags').value = "";
        location.href="/list-product.html";
    }
}

searchlist () {
    // console.log("diunilaomu");
    // let shadow = this.shadowRoot;
    // var serchcat = '/list-product.html?tag=' + encodeURIComponent(shadow.querySelector('#searchmain').value);
    // location.href = serchcat;
}
  static get template () {
    // Template getter must return an instance of HTMLTemplateElement.
    // The html helper function makes this easy.
    return html`
   
    <style>
            

    .index-grid {
        display: grid;
                      grid-template-columns: 180px auto  100px 150px;
                      grid-template-rows: 74px;
                      grid-auto-rows: 50px;
      }
      
      .logo {
        background-image: url('https://www.gettv.hk/img/logo/Change.png');
                      background-position: center center;
                      background-repeat: no-repeat;
                      background-size: contain;
      }
      
      .topWrap {
        background: none;
                      border: none;
                      height: 75px;
      }
      
      .paid {
        background: #F0846C;
                      border: none;
                      color: white;
                      height: 41px;
                      margin-top: 16px;
                      width: 90%;
                      border-radius: 3px;
                      cursor: pointer;
                      outline: none;
      }
      
      .pointer {
        cursor: pointer;
                      border: none;
                      background: #efefef;
      }
      
      .s {
        background: #efefef;
                      height: 41px;
                      margin-top: 7px;
                      border: none;
                      border-right: none;
      }
      
      .input-group1 {
        background: none;
                      height: 40px;
                      margin-top: 16px;
                      width: 90%;
                      border-color: black;
                      padding-left: 5px;
      }
      
      .custom-select {
        padding-top: 9px;
      }
      
      .full {
        width: 97%;
                      padding-left: 3%;
                      background-color: white;
      }
      
      .search {
        grid-column: 4 / 5;
                      grid-row: 1 / 2;
      }
      
      #searchmain {
        background: #efefef;
                      border: none;
      }
      
      @media only screen and (max-width: 768px) {
      change-user-panel {
        display: none;
      }
      
      .index-grid-md {
        display: grid;
                          grid-template-columns: 1px auto 50px 100px 50px;
                          grid-template-rows: 74px;
                          grid-auto-rows: 50px;
                          height: 62px;
      }
      
      .custom-select {
        grid-column: 1 / 2;
                          grid-row: 1 / 2;
      }
      
      .input {
        grid-column: 2 / 3;
                          grid-row: 1 / 2;
      }
      
      .input-group1 {
        margin-left: 0;
                          width: 98%;
      }
      
      .search {
        grid-column: 3 / 4;
                          grid-row: 1 / 2;
      }
      
      .logo {
        grid-column: 4 / 5;
                          grid-row: 1 / 2;
                          background-image: url('/img/logo/Change.png');
                          background-position: center center;
                          background-repeat: no-repeat;
                          background-size: contain;
      }
      
      .paid {
        display: none;
      }
      
      change-user-panel {
        grid-column: 5 / 6;
                          grid-row: 1 / 2;
      }
      
      .topWrap {
        background: none;
                          border: none;
                          height: 75px;
      }
      
      }
                /* .index-grid {
                    display: grid;
                    grid-template-columns: 180px 1px auto 50px 100px 150px;
                    grid-template-rows: 74px;
                    grid-auto-rows: 50px;
                }
    
                .logo {
                    background-image: url('https://www.gettv.hk/img/logo/Change.png');
                    background-position: center center;
                    background-repeat: no-repeat;
                    background-size: contain;
                }
    
                .topWrap {
                    background: none;
                    border: none;
                    height: 75px;
                }
    
                .paid {
                    background: #F0846C;
                    border: none;
                    color: white;
                    height: 41px;
                    margin-top: 16px;
                    width: 90%;
                    border-radius: 3px;
                    cursor: pointer;
                    outline: none;
                }
    
                .pointer {
                    cursor: pointer;
                    border: none;
                    background: #efefef;
                }
    
                .s {
                    background: #efefef;
                    height: 41px;
                    margin-top: 7px;
                    border: none;
                    border-right: none;
    
                }
    
                .input-group1 {
                    background: none;
                    height: 40px;
                    margin-top: 16px;
                    margin-left: 180px;
                    width: 80%;
                    border-color: black;
                    padding-left: 5px;
                }
    
                .custom-select {
                    padding-top: 9px;
                }
    
                .full {
                    width: 97%;
                    padding-left: 3%;
                    background-color: white;
                }
    
                .search {
    
                    grid-column: 4 / 5;
                    grid-row: 1 / 2;
    
    
                }
    
                #searchmain {
                    background: #efefef;
                    border: none;
                }
    
                @media only screen and (max-width: 768px) {
    
                    change-user-panel {
                        display: none;
                    }
    
    
                    .index-grid-md {
                        display: grid;
                        grid-template-columns: 1px auto 50px 100px 50px;
                        grid-template-rows: 74px;
                        grid-auto-rows: 50px;
                        height: 62px;
                    }
    
                    .custom-select {
                        grid-column: 1 / 2;
                        grid-row: 1 / 2;
                    }
    
                    .input {
                        grid-column: 2 / 3;
                        grid-row: 1 / 2;
                    }
    
                    .input-group1 {
                        margin-left: 0;
                        width: 98%;
                    }
    
                    .search {
                        grid-column: 3 / 4;
                        grid-row: 1 / 2;
                    }
    
                    .logo {
                        grid-column: 4 / 5;
                        grid-row: 1 / 2;
                        background-image: url("./img/logo/Change.png");
                        background-position: center center;
                        background-repeat: no-repeat;
                        background-size: contain;
                    }
    
                    .paid {
                        display: none;
                    }
    
                    change-user-panel {
                        grid-column: 5 / 6;
                        grid-row: 1 / 2;
                    }
    
                    .topWrap {
                        background: none;
                        border: none;
                        height: 75px;
                    }
    
                } */
            </style>
       <div class="full">
        <div class="index-grid index-grid-md">
    
            <a class="logo" href="/getchange.html">
            </a>
    
                
                
    <div class="input">
                    <vaadin-text-field id="searchmain" value="{{keyword}}"  on-keydown="_searchKeywords" placeholder="搜索產品" tabindex="0" class="input-group1">
                    </vaadin-text-field>
<!--                    <input id="searchmain" type="text" placeholder="&nbsp;搜索" class="input-group1">  -->
                </div>
                
        <div>
        <button class="paid" id="areachange" on-click="_areachange">收費區</button>
    </div>
            <change-user-panel>
                <div><button class="topWrap">/ 註冊</button><button class="topWrap">/ 登入</button></div>
            </change-user-panel>
        </div>
    
    
    </div>
    
    `;
  }
}

// Register the element with the browser.
customElements.define('change-header-top', dzElm);

