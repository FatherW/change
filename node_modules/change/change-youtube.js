import { PolymerElement, html } from 'https://d25k6mzsu7mq5l.cloudfront.net/node_modules/@polymer/polymer/polymer-element.js';
import {Dazzle} from 'https://d25k6mzsu7mq5l.cloudfront.net/node_modules/@dazzle/dz-dazzle/dz-library.js';

class dzElm extends PolymerElement {
  static get properties () {
    return {
    
    };
  }

  constructor() {
    super();
    this.src = this.getAttribute('src') || "https://www.youtube.com/embed/XoDMCn3P5pI";

  }
  ready() {
      super.ready();
      let domRect = document.querySelector('change-youtube').getBoundingClientRect();
      this.addEventListener('click',e=>{
        console.log('Click',e);
      });
    console.log('Rect',domRect,this.offsetTop,this.offsetLeft);
      if (Dazzle.editMode==="admin") {
        this.isAdmin = true;
        let button = document.createElement('vaadin-button');
        button.innerHTML = "更新影片";
        button.style.left =this.offsetLeft;
        button.style.top = this.offsetTop;
        this.shadowRoot.appendChild(button);
      }
      else
        this.isAdmin = false;

  }

  static get template () {
    // Template getter must return an instance of HTMLTemplateElement.
    // The html helper function makes this easy.

    return html`
    <style>
       vaadin-button{

         position:fixed !important;
       }
       :host {
         position:relative !important;
       }
    </style>
<!--    <template is="dom-if" if="{{isAdmin}}"><vaadin-button>更新影片</vaadin-button></template> -->
        <iframe width="100%" height="100%" src="{{src}}" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>
    `;
  }
}

// Register the element with the browser.
customElements.define('change-youtube', dzElm);

