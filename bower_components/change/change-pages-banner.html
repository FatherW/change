<link href="../polymer/polymer.html" rel="import">
<link href="../dz-menu/css/style.html" rel="import" />
<dom-module id="change-pages-banner">
    <template>
        <style include="icon-styles"></style>
        <style>
            .checked {
                color: orange;
            }

            #offer {
                margin-left: 8%;
                margin-right: 8%;
                margin-top: 2%;
            }

            #offer {
                height: 90px;
                background-color: white;
            }

            .in {
                display: inline;
                float: left;
                padding-right: 1%;
                height: inherit;
                padding-left: 1%;
            }

            #dp {
                width: 70px;
                height: 70px;
                border-radius: 9999999999999px;
                margin: 18% 0%;
            }

            .buttons {
                width: 9%;
            }

            #user {
                width: 54%;
            }

            .ret {
                font-size: 3em;
                text-align: center;
            }

            h6 {
                margin: 10% 0%;
            }

            #user {
                padding-top: 1%;
            }

            #Uname {
                font-size: 1.5em;
                font-weight: 800;
            }

            #mp{
                height: 250px;
                width: 100%;
                background-size: cover;
                background-position: center center;
                background-repeat: no-repeat;
                background-image: url("http://change.dazzle.website/Website Design/profile page/img/profile banner/company-profile-banner.png");
            }

        </style>
        <div id="container">
            <div id="mp">
            </div>
            <div id="offer">
                <div class="in">
                    <img id="dp" src="img/symbol/s5.png" alt="DP" />
                </div>
                <div id="user" class="in">
                    <span id="Uname"></span>
                    <br />
                    <span id="check"></span>
                </div>
                <div class="in buttons">
                    <h6>上貨數</h6>
                    <span class="ret" id="gNum"></span>
                </div>
                <div class="in buttons">
                    <h6>購買數</h6>
                    <span class="ret" id="buy"></span>
                </div>
                <div class="in buttons">
                    <h6>平均評分</h6>
                    <span class="ret" id="rate"></span>
                </div>
            </div>
        </div>
    </template>
</dom-module>
<script>
    (function() {
        Polymer({
            is: 'change-pages-banner',
            properties: {

            },
            created: function() {

            },
            ready: function() {
                let loc = "?1";

                let id = "";
                for (var i = 1; i < loc.length; i++) {
                    id += loc[i];
                }

                if (id != "") {
                    let shadow = this.shadowRoot;
                    let url = "https://41khtanrje.execute-api.ap-northeast-1.amazonaws.com/prod/Dazzle-elasticSearchController";
                    let params = {
                        "action": "getData",
                        "index": "change",
                        "type": "pages",
                        "id": id
                    };
                    Polymer.postData(url, params).then(res => {
                        if (res.code > 0) {
                            let all = res.resolve;

                            shadow.querySelector('#Uname').innerText = all['name'];

                            if (all['head'] == "") {
                                shadow.querySelector('#dp').src = "http://change.dazzle.website/img/head.svg";
                            } else {
                                shadow.querySelector('#dp').src = all['head'];
                            }
                            shadow.querySelector('#gNum').innerHTML = all['goods'];
                            shadow.querySelector('#buy').innerHTML = all['alreadybuy'];
                            shadow.querySelector('#rate').innerHTML = all['score'];
                        }
                    })

                } else {
                    shadow.querySelector('#Uname').innerText = "沒有此專頁";
                }
            },


        });
    })();
</script>