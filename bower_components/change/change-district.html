<link href="https://d25k6mzsu7mq5l.cloudfront.net/bower_components/polymer/polymer.html" rel="import">
<link href="https://d25k6mzsu7mq5l.cloudfront.net/bower_components/dz-menu/css/style.html" rel="import" />
<link rel="import" href="https://d25k6mzsu7mq5l.cloudfront.net/bower_components/vaadin-select/vaadin-select.html">

<dom-module id="change-district">
    <template>
        <style>
               *{
                font-family: sans-serif,微軟正黑體;
            }
            :host{
                --lumo-contrast-10pct: hsla(0, 0%, 100%, 0);
                --lumo-body-text-color:#808080;
                font-family: sans-serif,微軟正黑體;

            }
        </style>
        <vaadin-select id="vs1" placeholder="選擇地點"></vaadin-select>
    </template>
</dom-module>
<script>
    (function() {
        Polymer({
            is: 'change-district',
            properties: {},
            created: function() {
                console.log('Created');
            },
            ready: function() {

                this.valueArray = [""];
                let that = this;
                let shadow = this.shadowRoot;
                customElements.whenDefined('vaadin-select').then(function() {
                    const choice = [{
                        id: '中西區',
                        name: '中西區'
                    }, {
                        id: '灣仔區',
                        name: '灣仔區'
                    }, {
                        id: '東區',
                        name: '東區'
                    }, {
                        id: '南區',
                        name: '南區'
                    }, {
                        id: '油尖旺區',
                        name: '油尖旺區'
                    }, {
                        id: '深水埗',
                        name: '深水埗區'
                    }, {
                        id: '九龍城區',
                        name: '九龍城區'
                    }, {
                        id: '黃大仙區',
                        name: '黃大仙區'
                    }, {
                        id: '觀塘區',
                        name: '觀塘區'
                    }, {
                        id: '葵青區',
                        name: '葵青區'
                    }, {
                        id: '荃灣區',
                        name: '荃灣區'
                    }, {
                        id: '屯門區',
                        name: '屯門區'
                    }, {
                        id: '元朗區',
                        name: '元朗區'
                    }, {
                        id: '離島區',
                        name: '離島區'
                    }, {
                        id: '北區',
                        name: '北區'
                    }, {
                        id: '大埔區',
                        name: '大埔區'
                    }, {
                        id: '沙田區',
                        name: '沙田區'
                    }, {
                        id: '西貢區',
                        name: '西貢區'
                    }];


                    shadow.querySelector('#vs1').renderer = function(root) {
                        // Check if there is a list-box generated with the previous renderer call to update its content instead of recreation
                        if (root.firstChild) {
                            return;
                        }
                        // Create the <vaadin-list-box>
                        const listBox = document.createElement('vaadin-list-box');
                        choice.forEach(function(item) {
                            const vaadinItem = document.createElement('vaadin-item');
                            vaadinItem.textContent = item.name;
                            listBox.appendChild(vaadinItem);
                            vaadinItem.setAttribute('value', item.id);
                        });
                        // update the content
                        root.appendChild(listBox);
                    };
                    this.selection = shadow.querySelector('#vs1');
                    this.selection.addEventListener('change', e => {
                        console.log('123131231E', shadow.querySelector('#vs1').value);
                        Polymer.dzFire('select-district', {
                            'detail': {
                                'district': shadow.querySelector('#vs1').value
                            }
                        });
                    });
                });




            },
        });
    })();
</script>