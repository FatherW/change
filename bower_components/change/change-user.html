<link href="../polymer/polymer.html" rel="import">
<link rel="import" href="../vaadin-tabs/vaadin-tabs.html">
<link rel="import" href="../iron-pages/iron-pages.html">

<dom-module id="change-user">
    <template>
        <style>
            #left {
                width: 60%;
                float: left;
            }

            #dp {
                height: 50px;
                width: 50px;
            }

            #one, #two {
                display: inline;
                float: left;
                width: 10%;
            }

            #three {
                display: inline;
                float: left;
                width: 10%;
            }

            #right {
                width: 40%;
                display: inline;
            }

            #top {
                height: 220px;
            }
        </style>
        <div id="container">
            <div id="top">
                <div id="left">
                    <div id="profile">
                        <img id="dp" src="img/symbol/s5.png" alt="DP" />
                        <span id="Uname"></span>
                    </div>
                    <div id="info">
                        <p>Name: <span id="name"></span></p>
                        <p>Area: <span id="area"></span></p>
                        <p>Email: <span id="email"></span></p>
                        <p>Contact: <span id="contact"></span></p>
                    </div>
                </div>
                <div id="right">
                    <div id="one">
                        <h6>Goods</h6>
                        <span id="gNum"></span>
                    </div>
                    <div id="two">
                        <h6>Bought</h6>
                        <span id="buy"></span>
                    </div>
                    <div id="three">
                        <h6>Rating</h6>
                        <span id="rate"></span>
                    </div>
                </div>
            </div>
            <div>
                <vaadin-tabs  selected="{{page}}">
                    <vaadin-tab>My Products</vaadin-tab>
                    <vaadin-tab>Favorites</vaadin-tab>
                    <vaadin-tab>Purchases</vaadin-tab>
                </vaadin-tabs>
                <iron-pages selected="[[page]]">
                    <page>
                        <change-list id="mp"></change-list>
                    </page>
                    <page>
                        Favorites
                    </page>
                    <page>
                        <change-list id="purch"></change-list>
                    </page>
                </iron-pages>
        
                        

                        
            </div>
        </div>
    </template>
</dom-module>
<script>
    (function () {
        Polymer({
            is: 'change-user',
            properties: {

            },
            created: function () {

            },
            ready: function () {
                let shadow = this.shadowRoot;
                let url = "https://41khtanrje.execute-api.ap-northeast-1.amazonaws.com/prod/Dazzle-elasticSearchController";
                let params = {
                    "action": "getData",
                    "index": "change",
                    "type": "_user",
                    "id": "97",
                };
                Polymer.postData(url, params).then(res => {
                    console.log(res);
                    if (res.code > 0) {
                        shadow.querySelector('#Uname').innerText = res.resolve['username'];
                        shadow.querySelector('#name').innerText = res.resolve['username'];
                        shadow.querySelector('#area').innerText = res.resolve['area'];
                        shadow.querySelector('#email').innerText = res.resolve['email'];
                        shadow.querySelector('#contact').innerText = res.resolve['phone'];
                        shadow.querySelector('#gNum').innerText = res.resolve['goodsNum'];
                        shadow.querySelector('#buy').innerText = res.resolve['alreadyBuy'];
                        shadow.querySelector('#rate').innerText = res.resolve['score'];
                        console.log(res.resolve['likeProduct']);
                    }
                })
                params = {
                    "match": {
                        "ownerId": "97"
                    }
                }
                shadow.querySelector('#mp').query = params;
                params = {
                    "match": {
                        "buyerId": "97"
                    }
                }
                shadow.querySelector('#purch').query = params;
            },
        });
    })();
</script>