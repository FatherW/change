<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="./change-user-panel.html">

<dom-module id="change-header-top">
    <template>
        <style>
            .index-grid {
                display: grid;
                grid-template-columns: 180px 50px auto 50px 100px 150px;
                grid-template-rows: 74px;
                grid-auto-rows: 50px;
            }

            .logo {
                background-image: url("http://change.dazzle.website/img/logo/Change.png");
                background-position: center center;
                background-repeat: no-repeat;
                background-size: contain;
            }

            .topWrap {
                background: none;
                border: none;
                height: 75px;
            }

            .paid {
                background: #F0846C;
                border: none;
                color: white;
                height: 41px;
                margin-top: 16px;
                width: 90%;
                border-radius: 3px;
                cursor: pointer;
                outline: none;
            }
            .pointer{
                cursor: pointer;
                border:none;
                background:#efefef;
            }

            .s {
                background: #efefef;
                height: 41px;
                margin-top: 7px;
                border: none;
                border-right: none;

            }

            .input-group1 {
                background: none;

                height: 40px;
                margin-top: 16px;
                width: 98%;
                border-color: black;
                padding-left:5px;
            }

            .custom-select {
                padding-top: 9px;
            }

            .full {
                width: 97%;
                padding-left: 3%;
            }

            .search {

                grid-column: 4 / 5;
                grid-row: 1 / 2;


            }
            #searchmain {
                    background:#efefef;
                    border:none;
            }

            @media only screen and (max-width: 768px) {
                        
                change-user-panel{
                    display:none;   
                }

              
                .index-grid-md {
                    display: grid;
                    grid-template-columns: 50px auto 50px 100px 50px;
                    grid-template-rows: 74px;
                    grid-auto-rows: 50px;
                    height: 62px;
                }

                .custom-select {
                    grid-column: 1 / 2;
                    grid-row: 1 / 2;
                }

                .input {
                    grid-column: 2 / 3;
                    grid-row: 1 / 2;
                }

                .search {
                    grid-column: 3 / 4;
                    grid-row: 1 / 2;
                }

                .logo {
                    grid-column: 4 / 5;
                    grid-row: 1 / 2;
                    background-image: url("http://change.dazzle.website/img/logo/Change.png");
                    background-position: center center;
                    background-repeat: no-repeat;
                    background-size: contain;
                }

                .paid {
                    display: none;
                }

                change-user-panel {
                    grid-column: 5 / 6;
                    grid-row: 1 / 2;
                }

                .topWrap {
                    background: none;
                    border: none;
                    height: 75px;
                }

            }
        </style>
        <div class="full">
            <div class="index-grid index-grid-md">
                <a class="logo" href="getTv.html">
                </a>

                <div class="custom-select">
                    <select class="s">
                        <option value="0">物品</option>
                        <option value="1">用戶</option>
                    </select>
                    <div class="l"></div>
                </div>
                <div class="input">
                    <input id="searchmain" class="input-group1" type="text" placeholder="試試輸入iPhone">
                </div>
                <div class="search">
                    <button class="pointer" style="margin-top: 16px;
    height: 41px;
    background: white;
    border-color: black;" on-click="searchlist">
                        <svg class="search" viewBox="0 0 24 24" style=" width: 25px; height: 15px;">
                            <title>Search Icon</title>
                            <path fill="#57585a"
                                d="M15.618 17.032a9 9 0 1 1 1.414-1.414l5.675 5.675a1 1 0 0 1-1.414 1.414l-5.675-5.675zm-.701-2.05a1.017 1.017 0 0 1 .065-.065 7 7 0 1 0-.066.066z">
                            </path>
                        </svg>
                    </button>
                </div>
                <div>
                    <button class="paid" id="areachange">收費區</button>
                </div>
                <change-user-panel>
                    <div><button class="topWrap">/ 註冊</button><button class="topWrap">/ 登入</button></div>
                </change-user-panel>



            </div>


    </template>


</dom-module>
<script>
</script>
<script>
    (function() {
        Polymer({
            is: 'change-header-top',
            properties: {},

            ready: function() {
                let that = this;
                let shadow = this.shadowRoot;

                shadow.querySelector('#searchmain').addEventListener("keypress", function(e) {
                    var key = e.which || e.keyCode || 0;
                    if (key === 13) {
                        that.searchlist();
                    }

                });

                var isFree = false;
                shadow.querySelector('#areachange').addEventListener("click", e => {
                    if (isFree == false) {
                        Polymer.dzFire('areachange', {
                            'detail': {
                                "isFree": true
                            }
                        });
                        isFree = true;
                        shadow.querySelector('.paid').style.backgroundColor = "#4CAF50";
                        shadow.querySelector('#areachange').innerText = "免費區";
                        document.querySelector('#banner2').src = "img/banner.jpeg"
                    } else {
                        Polymer.dzFire('areachange', {
                            'detail': {
                                "isFree": false
                            }
                        });
                        isFree = false;
                        shadow.querySelector('.paid').style.backgroundColor = "#F0846C";
                        shadow.querySelector('#areachange').innerText = "收費區";
                        document.querySelector('#banner2').src = "img/WX20200513-112437@2x.png"


                    }

                })
            },
            searchlist: function() {
                console.log("diunilaomu");
                let shadow = this.shadowRoot;
                if (shadow.querySelector('.s').value == "0") {
                    var serchcat = '/list-product.html?tag=' + encodeURIComponent(shadow.querySelector('#searchmain').value);
                } else {
                    let test = encodeURIComponent("試試");
                    var serchcat = "/list-product.html?user=" + test;
                }
                location.href = serchcat;
            },



        });
    })();
</script>