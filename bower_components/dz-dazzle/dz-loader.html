<link rel="import" href="../polymer/polymer.html" />
<link rel="import" href="dz-library.html" />
<dom-module id="dz-loader"> </dom-module>

<script>
   
    const getLicense = async() => {
        const response = await fetch("dz-license");
        const json = await response.text();
        console.log("License", json, JSON.parse(json));
    };

    let url =
        "https://d25k6mzsu7mq5l.cloudfront.net/user-data/dnamatch/template/dnamatch/component.json";
    Polymer.getContent(url).then((html) => {
        console.log("Test Content", html);
    });
    let license = store.get('dzLicense') || null;

    if (!license)
        Polymer.getContent("/dz-license?id=" + new Date().getTime()).then(
            (html) => {

                console.log("License", html);
                Polymer.dzLicense = JSON.parse(html);
                store.set('dzLicense', Polymer.dzLicense);
                console.log("License", html);
                Polymer.dzInit();
            },
            (err) => {
                Polymer.dzInit();
            }
        );
    else{
        Polymer.dzLicense = license;
        Polymer.dzInit();
    }
</script>