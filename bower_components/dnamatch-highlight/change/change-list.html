<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../change/change-product-item.html">
<dom-module id="change-list">

    <template>
        <style>
            .profile-finger {
                width: 100%;
            }

            .profile-grid {
                width: 84%;
                padding-left: 8%;
                padding-right: 8%;
                display: grid;
                grid-row-gap: 20px;
                grid-column-gap: 15px;
                grid-template-columns: 100%;
                grid-template-rows: 1fr 2fr 4fr;
                background-color: cornsilk;
                padding-top: 20px;
                padding-bottom: 20px;
            }

            .short-profile-grid {
                display: grid;
                grid-column-gap: 15px;
                grid-template-columns: 59% 12% 12% 12%;
                background-color: white;
                border: 2px solid gainsboro;
                padding: 30px;
                padding-left: 4%;
                padding-right: 4%;
            }

            .detail-profile-grid {
                display: grid;
                grid-row-gap: 10px;
                grid-template-rows: 2fr 1fr 1fr 1fr 1fr;
                background-color: white;
                border: 2px solid gainsboro;
                padding: 20px;
                padding-left: 4%;
                padding-right: 4%;
            }

            .things-profile {
                background-color: white;
                border: 2px solid gainsboro;
            }

            #a1,
            #a2 {
                display: inline-block;
            }

            #a3 {
                float: right;
            }

            .button {
                margin-left: 4%;
                margin-right: 4%;
                margin-top: 41px;
            }

            .buttonGray {
                width: 150px;
                background-color: gray;
                color: black;
                border-radius: 2px;
                height: 30px;
                font-size: 16px;
                margin-right: 10px;
            }

            #left1 {
                float: left;
            }

            #left2 {
                float: left;
            }

            #left3 {
                float: left;
            }

            #right1 {
                float: right;
            }

            #right2 {
                float: right;
                padding-top: 4px;
            }

            #right3 {
                float: right;
            }

            #right4 {
                float: right;
                padding-top: 4px;
            }

            .things-grid {
                display: grid;
                width: 92%;
                padding-left: 4%;
                padding-right: 4%;
                padding-top: 30px;
                padding-bottom: 41px;
                grid-column-gap: 15px;
                grid-template-columns: repeat(4, 1fr);

            }

            change-item {
                width: 100%;
            }

            svg.title_tags {
                width: 100%;
                height: 30px;
            }

            svg.s_title_tags {
                margin: 5px;
                height: 16px;
                width: 40px;
                border-radius: 2px;

            }

            change-things {
                border: 1px solid gainsboro;
                padding: 12px;
            }

            .img {
                width: 98%;
                height: 160px;
                background-size: contain;
                /* background-repeat: no-repeat; */
                margin: 1%;
                background-image: url(http://change.dazzle.website/img/channel_banner/1.jpg);
            }

            .circle {
                margin: 5px;
                height: 20px;
                width: 20px;


            }
        </style>

        <div class="things-profile">
            <div class="button">
                <div id="left1">
                    <button class="buttonGray">我的货物
                    </button>
                </div>
                <div id="left2">
                    <button class="buttonGray">我的選購清單
                    </button>
                </div>
                <div id="left3">
                    <button class="buttonGray">過去交易
                    </button>
                </div>
                <!-- right 排列绝不可改！ -->
                <div id="right1">
                    <div id="a3">
                        <svg class="circle">
                            <circle cx="10" cy="10" r="9" stroke="orange" stroke-width="2" fill="orange" />
                        </svg>
                    </div>
                </div>
                <span id="right2">已完成交易</span>
                <div id="right3">
                    <div id="a3">
                        <svg class="circle">
                            <circle cx="10" cy="10" r="9" stroke="blue" stroke-width="2" fill="blue" />
                        </svg>
                    </div>
                </div>
                <span id="right4">待回覆（2）</span>
            </div>
            <div class="things-grid">
                <!-- <change-things>
                    <div>
                        <div id="a1">
                            <img src="http://change.dazzle.website/img/user_profile.png">
                        </div>
                        <div id="a2">
                            <div class="name">1234</div>
                            <div class="time">兩分鐘前</div>
                        </div>
                        <div id="a3">
                            <svg class="circle">
                                <circle cx="10" cy="10" r="9" stroke="orange" stroke-width="2" fill="orange" />
                            </svg>
                        </div>
                    </div>
                    <div class="img">
                    </div>
                    <svg class="s_title_tags">
                        <polygon points="0,0 40,0 30,16 0,16" style="fill:#6AA64F;stroke:#6AA64F;stroke-width:0">
                        </polygon>
                        <text x="3" y="12" fill="white" style="font-size:10px;">全新</text>
                    </svg>
                    <h3>頸鏈 的士</h3>
                    <div class="price">HK$140</div>
                    <change-item-tag>
                        <change-tag class="small">车舆地产</change-tag>
                        <div class="clear"></div>
                    </change-item-tag>

                    <change-like>
                        <span class="glyphicon glyphicon-heart"></span>
                    </change-like>
                    <div class="clear"></div>
                </change-things>
                <change-things>
                    <div>
                        <div id="a1">
                            <img src="http://change.dazzle.website/img/user_profile.png">
                        </div>
                        <div id="a2">
                            <div class="name">1234</div>
                            <div class="time">兩分鐘前</div>
                        </div>
                        <div id="a3">
                            <svg class="circle">
                                <circle cx="10" cy="10" r="9" stroke="blue" stroke-width="2" fill="blue" />
                            </svg>
                        </div>
                    </div>
                    <div class="img">
                    </div>
                    <svg class="s_title_tags">
                        <polygon points="0,0 40,0 30,16 0,16" style="fill:#6AA64F;stroke:#6AA64F;stroke-width:0">
                        </polygon>
                        <text x="3" y="12" fill="white" style="font-size:10px;">全新</text>
                    </svg>
                    <h3>頸鏈 的士</h3>
                    <div class="price">HK$140</div>
                    <change-item-tag>
                        <change-tag class="small">车舆地产</change-tag>
                        <div class="clear"></div>
                    </change-item-tag>

                    <change-like>
                        <span class="glyphicon glyphicon-heart"></span>
                    </change-like>
                    <div class="clear"></div>
                </change-things>
                <change-things>
                    <div>
                        <div id="a1">
                            <img src="http://change.dazzle.website/img/user_profile.png">
                        </div>
                        <div id="a2">
                            <div class="name">1234</div>
                            <div class="time">兩分鐘前</div>
                        </div>
                        <div id="a3">
                            <svg class="circle">
                                <circle cx="10" cy="10" r="9" stroke="blue" stroke-width="2" fill="blue" />
                            </svg>
                        </div>
                    </div>
                    <div class="img">
                    </div>
                    <svg class="s_title_tags">
                        <polygon points="0,0 40,0 30,16 0,16" style="fill:#6AA64F;stroke:#6AA64F;stroke-width:0">
                        </polygon>
                        <text x="3" y="12" fill="white" style="font-size:10px;">全新</text>
                    </svg>
                    <h3>頸鏈 的士</h3>
                    <div class="price">HK$140</div>
                    <change-item-tag>
                        <change-tag class="small">车舆地产</change-tag>
                        <div class="clear"></div>
                    </change-item-tag>

                    <change-like>
                        <span class="glyphicon glyphicon-heart"></span>
                    </change-like>
                    <div class="clear"></div>
                </change-things>
                <change-things>
                    <div>
                        <div id="a1">
                            <img src="http://change.dazzle.website/img/user_profile.png">
                        </div>
                        <div id="a2">
                            <div class="name">1234</div>
                            <div class="time">兩分鐘前</div>
                        </div>
                        <div id="a3">
                            <svg class="circle">
                                <circle cx="10" cy="10" r="9" stroke="orange" stroke-width="2" fill="orange" />
                            </svg>
                        </div>
                    </div>
                    <div class="img">
                    </div>
                    <svg class="s_title_tags">
                        <polygon points="0,0 40,0 30,16 0,16" style="fill:#6AA64F;stroke:#6AA64F;stroke-width:0">
                        </polygon>
                        <text x="3" y="12" fill="white" style="font-size:10px;">全新</text>
                    </svg>
                    <h3>頸鏈 的士</h3>
                    <div class="price">HK$140</div>
                    <change-item-tag>
                        <change-tag class="small">车舆地产</change-tag>
                        <div class="clear"></div>
                    </change-item-tag>

                    <change-like>
                        <span class="glyphicon glyphicon-heart"></span>
                    </change-like>
                    <div class="clear"></div>
                </change-things> -->

            </div>
        </div>


    </template>

</dom-module>

<script>
    (function() {



        Polymer({
            is: 'change-list',
            properties: {
                "query": {
                    "type": Object
                }
            },

            created: function() {



            },
            ready: function() {
                this._showMyGoods();
            },
            _showMyGoods: function() {
                console.log('Show My Goods');
                let shadow = this.shadowRoot;
                let that = this;
                if (!this.query)
                    this.query = {
                        "match_all": {}
                    }

                let goodsUrl = "https://41khtanrje.execute-api.ap-northeast-1.amazonaws.com/prod/Dazzle-elasticSearchController";
                let params = {
                    "action": "searchData",
                    "index": "change",
                    "type": "product",
                    "_source": ["pics", "isNew", "productname", "price", "tags"],
                    "body": {
                        "query": this.query
                    }
                };
                Polymer.postData(goodsUrl, params).then(res => {

                    if (res.code > 0) {
                        that.myProducts = res.resolve;
                        let wrapper = that.shadowRoot.querySelector('.things-grid');
                        wrapper.innerHTML = '';
                        that.myProducts.forEach(item => {
                            let productItem = document.createElement('change-product-item');
                            productItem.data = item;
                            wrapper.appendChild(productItem);
                        });
                    } else {
                        alert('服務器故障');
                    }


                });
            },
            handleResponse: function(response) {
                console.log('Response', response);
            },


        });

    })();
</script>